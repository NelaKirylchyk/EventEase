@page "/events/{name}"
@using Microsoft.AspNetCore.Components
@using EventEase.Models

<PageTitle>Event Details</PageTitle>
<h1>Event Details</h1>

@if (Event is null)
{
    <p class="text-danger">Event not found.</p>
}
else
{
    <EventCard Name="@Event.Name" Date="@Event.Date" Location="@Event.Location" />
    <div class="mt-3">
        <NavLink class="btn btn-success" href="@($"/register/{Uri.EscapeDataString(Event.Name)}")">Register</NavLink>
        <NavLink class="btn btn-secondary ms-2" href="/events">Back to Events</NavLink>
    </div>
}

@code {
    [Parameter] public string? name { get; set; }

    // Mock lookup; replace with real data source if available
    private EventItem? Event;

    protected override void OnParametersSet()
    {
        var events = new List<EventItem>
        {
            new() { Name = "TechConf 2026", Date = new DateTime(2026, 5, 12), Location = "Seattle, WA" },
            new() { Name = "Open Source Summit", Date = new DateTime(2026, 8, 3), Location = "Austin, TX" },
            new() { Name = "Cloud Expo", Date = new DateTime(2026, 10, 21), Location = "New York, NY" }
        };

        Event = events.FirstOrDefault(e => string.Equals(e.Name, name, StringComparison.OrdinalIgnoreCase));
    }
}